<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal">
<body>


<div metal:define-macro="portlet" 
     class="portlet"
     style="border: none"
     tal:define="nav nocall:here/navigation;
     params python:nav.getContextNavList(0, [], 100, request, try_cache=1);
     Iterator python:modules['Products.CMFPlone'].IndexIterator;
     mtabindex python:Iterator(pos=100);
     childlist python:[];
     nodelist python:params[1];
     portal_url nocall:here/portal_url;
     smtabindex python:Iterator(pos=200);
     maxdepth python:3;
     base_props nocall:here/portal_skins/base_properties|nothing;
     col_bg_header string:transparent;
     col_font_header base_props/navPortletHeaderFontColor|string:#FFFFFF;
     col_bg_body string:transparent;
     e_icon base_props/navPortletEditIcon|string:edit_box.gif;
     edit_condition python:context.portal_membership.checkPermission('Navigation: manage', nav);
     customization_link python:nav.absolute_url()+'/folder_contents'">
     
    <div class="padding"
         tal:attributes="style python:test(col_bg_body, 'background-color: '+col_bg_body, '')">

        <strong class="portletHeader" 
            i18n:translate="" tal:define="cssstyle1 python:test(col_bg_header, 'background-color: '+col_bg_header, '');
            cssstyle2 python:test(col_font_header, 'color: '+col_font_header, '');
            cssstyle string:${cssstyle1};;${cssstyle2}"
            tal:attributes="style cssstyle"
            >&nbsp;</strong>     
        <div class="portletClose"><a 
            tal:condition="python:test(edit_condition , 1, 0)"
            tal:attributes="href customization_link"  tal:on-error="nothing"
           href=''><img src="edit_box.gif" border="0" width="13" height="12" alt="edit portlet content"
           tal:attributes="src string:${here/portal_url}/${e_icon}"
           i18n:attributes="alt"/></a>
       </div>

        <div class="portletBody" style="background-color: transparent">
            <div class="navigationList"
                 tal:define="portal_url nocall:here/portal_url">
            <ul metal:define-macro="nav_children"
                tal:define="navlist python:test(childlist!=[],childlist,nodelist)">
                <metal:block tal:repeat="node navlist">
                
                    <li tal:attributes="class styleclass"
                        tal:define="childlist python:node.get('children', []);
                        styleclass python:test(node['active'], test((len(childlist)>0 and maxdepth>node['depth']), 'active', 'active nosublist'), '');
                        styleclass python:test(node['hasLine']==1, styleclass+' separated', styleclass)">
                        
                        <div tal:define="multiplier python:test(node['depth']<=2, (int(node['depth'])-2), 1);
                             indent python:12 * multiplier"
                             tal:attributes="style python:test(indent>0, 'padding-left:'+ str(indent) +'px', '');
                             class python:test(node['active'], 'active', '')"
                             i18n:domain="elevateIT">
                            <a href="" name="navigationlink"
                               tal:define="target nocall:node/target|nothing;
                               target python:test(target != '', target, '_self');
                               num python:repeat['node'].number;
                               sc string:button_0$num;
                               sc_active string:${sc}_active"
                               accesskey="accesskeys-navigation"
                               i18n:attributes="accesskey"
                               tal:attributes="href string:${node/targetUrl};
                                   tabindex mtabindex/next;
                                   target target;
                                   class python:test(node['active'], sc_active, sc)"
                               tal:content="node/Title|node/id">node/id</a>
                        
                        <div tal:condition="python:maxdepth>node['depth'] and len(childlist)>0"
                                     tal:define="global childlist childlist">
                            <ul metal:use-macro="here/portlet_main_nav/macros/nav_children" />
                        </div>
                   </div>
                   </li> 
                </metal:block>
                
            </ul>
            </div>
        </div>
    </div>
</div>

</body>
</html>