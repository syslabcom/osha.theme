<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="osha">


<div metal:fill-slot="main" i18n:domain="osha"
       tal:define="resultsByLetter view/resultsByLetter;
                   resultsByTermId view/resultsByTermId;
                   resultsList python:resultsByLetter[0];
                   resultsMap python:resultsByLetter[1];
                   letter view/getLetter |string:;
                   term_id view/getTerm_id |string:;
                   Batch python:modules['Products.CMFPlone'].Batch;
                   DateTime python:modules['DateTime'].DateTime;
                   b_size python:10;b_start python:0;
                   b_start request/b_start | b_start;
                   desc_length site_properties/search_results_description_length;
                   desc_ellipsis site_properties/ellipsis;
                   provider_helper here/@@provider_helper;
                   template_id string:@@index_atoz;
                   ">

  <style type="text/css">
  #db_results dd { background-color: transparent; margin-left: 0; padding-left: 2em !important; border-bottom: 1px dotted gray; padding: 2px; } 
  #keylist { list-decoration: none; }
  #keylist li { padding: 3px; margin:0; }
  .current_term { background-color: #ccc; }
  </style>

    
    <div>
        
        <h1 class="documentFirstHeading">Alphabetical Index of the Multilingual Thesaurus</h1>

        <div style="text-align:center" tal:define="alphabet view/getAlphabet; 
                         ">
            <span tal:repeat="alpha alphabet">
                
                <a href="" rel="nofollow"
                   tal:attributes="href string:${request/URL}?letter=${alpha}">                
                    <strong style="font-size: larger" tal:content="alpha" />
                </a>
                
                <span tal:omit-tag="" tal:condition="not:repeat/alpha/end">|</span> 
            
            </span>
            
        </div>    



        <div tal:condition="view/getLetter">
            <h2>
                <span tal:content="view/getLetter">Letter</span>
            </h2>
            <ul id="keylist">
                <tal:repeat tal:repeat="key resultsList">
                <li tal:define="key_term_id python:view.getIdByCaption(key)"
                    tal:attributes="class python: key_term_id==term_id and 'current_term' or ''"> 
                    <a href="" rel="nofollow"
                       tal:content="python:'%s (%s)' %(key, len(resultsMap.get(key, [])) ) "
                       tal:attributes="href string:${request/URL}?letter=${letter}&term_id=${key_term_id};"/>
                </li>
                </tal:repeat>
            </ul>
        
        
        
        
            <div tal:condition="view/getTerm_id">

            <h2>
                <span i18n:translate="heading_search_results">
                    Search results
                </span>            
                 - 
                <span tal:replace="python:view.getCaptionById(term_id)"/>   
            </h2>

            <span class="discreet">
            &mdash;
            <span i18n:translate="batch_x_items_matching_your_criteria">
                <span i18n:name="number" 
                      tal:omit-tag="" 
                      tal:content="python:len(resultsByTermId)">234</span> items matching your search terms
                </span>
            </span>


            <div tal:condition="not: resultsByTermId">
                <p><strong i18n:translate="description_no_results_found">No results were found.</strong></p>
            </div>

            <div tal:condition="resultsByTermId"
                 tal:define="batch python:Batch(resultsByTermId, b_size, int(b_start), orphan=1);">

            <div metal:use-macro="here/batch_macros/macros/navigation" />
            
            <dl id="db_results">
            <tal:results repeat="result batch">
            <tal:entry define="result_url result/getURL;
                               result_url string:$result_url/view;
                               url result/getRemoteUrl | result_url;
                               title result/Title|string:;
                               item_cas result/getCas|string:;
                               item_einecs result/getEinecs|string:;
                               item_remoteLanguage result/getRemoteLanguage|string:;
                               item_sme result/getSme | nothing;
                               item_subject result/Subject | python:[];                           
                               item_provider result/Provider | string:;                           
                               item_modified result/modified;
                               item_pubdate result/effective;
                               item_creator result/Creator;
                               gc python:here.portal_languages.getNameForLanguageCode;
                               "
                        condition="result">


            <metal:macro use-macro="here/oshmacros/macros/searchresults" />
    

            </tal:entry>
            </tal:results>
            </dl>
            
            <div metal:use-macro="here/batch_macros/macros/navigation" />

        <script type="text/javascript" src="http://shots.snap.com/ss/9546198046d69719d86ad9ba1aee068e/snap_shots.js"></script>
        
            </div>    
          </div>    
        
        </div>

    </div>



</div>
</html>