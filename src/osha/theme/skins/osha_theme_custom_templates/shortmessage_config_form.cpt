<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="elevateIT">

  <body>

    <div metal:fill-slot="main" i18n:domain="elevateIT"
         tal:define="rejection here/rejectAnonymous;
                     errors options/state/getErrors;
                     itemtype python:here.getTypeInfo().Title()">

      <h1 i18n:translate="heading_send_shortmessage">
        Send
        <span i18n:name="itemtype">
          <span tal:content="itemtype"
                tal:omit-tag="">Item type</span>
        </span>
      </h1>

      <form name="send_form"
            action="."
            method="post"
            enctype="multipart/form-data"
            tal:attributes="action string:${here/absolute_url}/${template/getId}" >


        <fieldset i18n:domain="elevateIT">

          <legend i18n:translate="legend_configure" i18n:domain="elevateIT">Configure</legend>

          <div class="field"
               tal:define="error errors/color|nothing;
                           Color request/color | python:here.getProperty( 'color', '');"
               tal:attributes="class python:test(error, 'field error', 'field')">

            <label for="color" i18n:translate="label_color">Color</label>

            <div tal:content="error" i18n:translate="">Validation error output</div>

            <input type="text"
                   id="color"
                   name="color"
                   value=""
                   size="40"
                   tabindex=""
                   tal:attributes="value Color;
                                   tabindex tabindex/next;"
                   />

          </div>

          <div class="formControls">
            <input class="context"
                   tabindex=""
                   type="submit"
                   name="form.button.Config"
                   value="Save"
                   i18n:attributes="value"
                   tal:attributes="tabindex tabindex/next;" />

            <input class="standalone"
                   tabindex=""
                   type="submit"
                   name="form.button.Cancel"
                   value="Cancel"
                   i18n:domain="plone"
                   i18n:attributes="value"
                   tal:attributes="tabindex tabindex/next;" />

          </div>

        </fieldset>


        <fieldset i18n:domain="elevateIT">

          <legend i18n:translate="legend_preview" i18n:domain="elevateIT">Preview</legend>

          <div class="formControls">
            <input class="context"
                   tabindex=""
                   type="submit"
                   name="form.button.Preview"
                   value="Preview"
                   i18n:attributes="value"
                   tal:attributes="tabindex tabindex/next;" />


          </fieldset>

          <fieldset i18n:domain="elevateIT">

            <legend i18n:translate="legend_details" i18n:domain="elevateIT">Details</legend>

            <div class="field"
                 tal:define="error errors/email|nothing;
                             EMail request/email | string:;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label for="email" i18n:translate="email_title">List Manager E-Mail</label>

              <div i18n:translate="" tal:content="error">Validation error output</div>

              <input type="text"
                     id="email"
                     name="email"
                     value=""
                     size="40"
                     tabindex=""
                     tal:attributes="value EMail;
                                     tabindex tabindex/next;"
                     />


            </div>

            <div class="field"
                 tal:define="email_groups request/email_groups | string:;">

              <label for="email_groups"
                     i18n:translate="email_groups">Email lists</label>
              <br />
              <select id="email_groups"
                      name="email_groups"
                      multiple="multiple">
                <tal:email_details repeat="email_details context/portal_properties/site_properties/shortmessage_email_groups">
                  <option tal:define="email_split python:email_details.split('|');
                                      address python:email_split[0];
                                      name python:email_split[1]"
                          tal:attributes="value address"
                          tal:content="name"></option>
                </tal:email_details>
              </select>
            </div>

            <div class="formControls">
              <input class="context"
                     tabindex=""
                     type="submit"
                     name="form.button.Send"
                     value="Send"
                     i18n:attributes="value"
                     tal:attributes="tabindex tabindex/next;" />

              <input class="standalone"
                     tabindex=""
                     type="submit"
                     name="form.button.Cancel"
                     value="Cancel"
                     i18n:domain="plone"
                     i18n:attributes="value"
                     tal:attributes="tabindex tabindex/next;" />

            </div>
          </fieldset>

          <input type="hidden" name="form.submitted" value="1" />

        </form>

      </div>

    </body>
  </html>
