<metal:page define-macro="master">
<metal:doctype define-slot="doctype">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
</metal:doctype>
<metal:block use-macro="here/global_defines/macros/defines" />
<metal:block tal:define="charset here/site_properties/default_charset|string:utf-8; dummy python:request.RESPONSE.setHeader('Content-Type', 'text/html;;charset=%s' % charset)" />
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      tal:attributes="lang site_properties/default_language|default;
                      xml:lang site_properties/default_language|default;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"
          tal:define="charset site_properties/default_charset|string:utf-8"
          tal:attributes="content string:text/html;;charset=${charset}" />

    <title tal:define="portal_title here/portal_properties/title;
                       here_title here/Title | here/title | here/id;
                       template_title python:template.title_or_id();
                       here_title python:test( portal_title != here_title,
                                               here_title,
                                               template_title )"
           tal:content="structure string:$portal_title - $here_title">Title of page</title>


    <meta tal:condition="here/listMetaTags|nothing"
          tal:repeat="keyval here/listMetaTags"
          tal:attributes="name python:keyval[0];
                          content python:keyval[1];" />

    <!-- Main style sheets for CSS2 capable browsers -->

    <tal:scripts define="view context/@@plone|nothing"
                replace="structure provider:plone.resourceregistries.scripts" />

    <link rel="stylesheet" type="text/css" media='all' href="oshmail.css"
        tal:attributes="href string:${here/portal_url}/oshmail.css" />

</head>

<body leftmargin="5"
    tal:define="ltool nocall:here/portal_languages;
                propstool nocall:here/portal_properties;
                site_props nocall:propstool/site_properties;
                prefLang ltool/getPreferredLanguage;
                oshaview here/@@oshaview;
                collage_id here/getId;
                url python:oshaview.handleOSHMailUrls('http://osha.europa.eu', collage_id);">

<div id="visual-portal-wrapper">
<table id="oshmail-topbanner" width="100%" cellpadding="0" cellspacing="0" border="0"
    tal:condition="python:context.getId()=='oshmail-100'"
    background="http://osha.europa.eu/en/news/OSHmailCandlesMiddle.png">
    <tr>
        <td>
            <img src="http://osha.europa.eu/en/news/OSHmailCandlesLogo.png" alt="OSHmail jubilee logo" ></td>
    <td background="http://osha.europa.eu/en/news/OSHmailCandlesMiddle.png">
        <img src="http://osha.europa.eu/en/news/OSHmailCandlesMiddle.png" alt="OSHmail jubilee background"></td>
    <td>
        <img src="http://osha.europa.eu/en/news/OSHmailCandlesRight.png" alt="OSHmail jubilee candles" ></td>
    </tr>
</table>

<table cellpadding="0" cellspacing="0" border="0" tal:condition="python:context.getId()!='oshmail-100'"
       summary="Layout table"
       i18n:attributes="summary"
       tal:define="topbanner string:http://osha.europa.eu/images/topbanner2.jpg;
       dbo python:0;
       portal_title here/portal_properties/title;">
    <tr>
        <td rowspan="2" tal:attributes="rowspan python:test(dbo, '1', '2')" id="portal-logo-wrapper">
    <div id="portal-logo">
    <a href="/"
       tal:attributes="href url">
       <span tal:omit-tag="" tal:on-error="nothing" >
         <img alt="" title="" tal:define="logo python: prefLang=='en' and 'logo.gif' or 'logo_'+prefLang+'.gif'"
            tal:attributes="src string:http://osha.europa.eu/${logo};
                            title portal_title;
                            alt portal_title"
            i18n:attributes="title"/>
       </span>
    </a>
    </div>
        </td>
        <tal:block condition="not:dbo">
        <td id="portal-top-content">
            <div class="top-actions">
                <div class="slogan" i18n:translate="" i18n:domain="osha"
                     tal:content="site_properties/osha_properties/site_slogan|string:European Agency for Safety and Health at Work">
                    European Network
                </div>
            </div>
         </td>
         <td id="portal-top-banner" rowspan="2" tal:condition="nocall:topbanner">
             <img alt="European flag" title="European flag"
             tal:attributes="src topbanner" />
         </td>
         </tal:block>
     </tr>
     <tr tal:condition="not:dbo">
         <td id="portal-top-dropdowns" align="right">
<img src="http://osha.europa.eu/images/oshmail_banner.jpg" border="0" title="OSHMail" alt="OSHMail">
         </td>
     </tr>
     <tr tal:condition="not:dbo">
        <td id="portal-variable1">
            <div class="area" tal:condition="exists:here/variable_area1"
                 tal:content="structure here/variable_area1|nothing" tal:on-error="structure python:test(member.has_role('Manager', here), chr(60)+'span style=\'color: red\'>page template variable_area1 has errors!'+chr(60)+'/span>', '')">
                 area 1
            </div>
        </td>
        <td id="portal-variable2" colspan="2"
            tal:attributes="colspan python:test(topbanner, '2', '1')">
            <div class="area" tal:condition="exists:here/variable_area2"
                 tal:content="structure here/variable_area2|nothing" tal:on-error="structure python:test(member.has_role('Manager', here), chr(60)+'span style=\'color: red\'>page template variable_area2 has errors!'+chr(60)+'/span>', '')">
                 area 2
            </div>
        </td>
     </tr>
</table>


<div class="visualClear"></div>

<p>&nbsp;</p>

    <div class="title">
        <h1 class="documentFirstHeading" tal:content="here/title_or_id">collection id or title</h1>
    </div>
<table width="100%">
    <tr>
        <td valign="top"
            tal:define="lang_info ltool/getAvailableLanguageInformation;">
        <tal:block define="supported_languages ltool/listSupportedLanguages|python:[];
                           languages_on_main_site site_props/languages_on_main_site|python:[];
                           served_language_keys python:[x[0] for x in supported_languages if x[0] in languages_on_main_site];
                           served_languages python:oshaview.get_sorted(served_language_keys);"
            condition="python:len(served_languages)>1">
            <div i18n:domain="osha" style="text-align: center"
                tal:define="thisurl string:${here/absolute_url}/${template/id}">

              <span tal:repeat="lang served_languages"><a tal:omit-tag="python:prefLang == lang"
                        tal:define="lang_url python:thisurl+'?set_language='+lang;
                            url python:oshaview.handleOSHMailUrls(lang_url, collage_id);"
                        href="" tal:attributes="href url"
                        tal:content="python:oshaview.get_native_language_by_code(lang)">lang</a><span tal:condition="not:repeat/lang/end">&nbsp;|&nbsp;</span></span>
            </div>
        </tal:block>
      </td>
    </tr>
  </table>

<p>&nbsp;</p>

   <metal:bodytext metal:define-slot="main" tal:content="nothing">
      <!-- Page body text -->
   </metal:bodytext>


</div>

</body>
</html>
</metal:page>

