<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="osha">

<metal:head fill-slot="top_slot"
tal:define="dummy python:request.set('disable_border',1)" />

<metal:block fill-slot="css_slot">
<style type="text/css">
    #subscribe_box {
    width: 50em;
    border: 1px solid #aaa;
    }
    #subscribe_heading {
    background-color: #c5cbd8;
    padding: 5px;
    }
    #subscribe_body {
        padding:5px;
    }
    .submitbuttons {
        text-align:center;
        margin-top: 20px;
    }
    .key { float:left; width: 20em;  clear: both; overflow: hidden; }
    .value { margin-left: 16em; }
    .field {clear: both; overflow: hidden; }
</style>
</metal:block>

<body>

<div metal:fill-slot="main"
     i18n:domain="osha"
     tal:define="errors options/state/getErrors |nothing;
                 view context/@@subscribe_helper;
                 userSettings view/getUserSettings | python:{};">


    <form action="subscribe_alert"
          method="post"
          enctype="multipart/form-data"
          tal:attributes="action template/getId">


<div id="subscribe_box">

    <h2 id="subscribe_heading" i18n:domain="slc.alertservice">
        <img src="alertservice_icon.gif" width="17" height="16" />
        <span i18n:translate="heading_edit_alert" tal:condition="request/s |nothing">Edit an alert</span>
        <span i18n:translate="heading_create_alert" tal:condition="not:request/s |nothing">Create an alert</span>
    </h2>

       <div id="subscribe_body">
            <p i18n:translate="description_edit_alert" i18n:domain="slc.alertservice">Please specify your query according to your interests:</p>
            
    <div metal:use-macro="context/subscription_macros/macros/subject_field"></div>
    
    <div metal:use-macro="context/subscription_macros/macros/portal_type_field"></div>
    
    <div metal:use-macro="context/subscription_macros/macros/schedule_field"></div>

    <div metal:use-macro="context/subscription_macros/macros/language_field"></div>

    <div metal:use-macro="context/subscription_macros/macros/email_field"></div>
    

        <div class="field"
            tal:define="error errors/oshmail | nothing;
                        name python:request.get('oshmail', '');"
            tal:attributes="class python:test(error, 'field error', 'field')">

            <input class="noborder"
                   name="oshmail"
                   type="checkbox"
                   tal:attributes="checked python:test(name, 'checked', '');" />

        <span i18n:translate="description_subscribe_oshmail">I also want to receive OSHmail, 
            the free monthly newsletter</span> (<a href="https://osha.europa.eu/news/oshmail/" target="_blank" i18n:translate="oshmail_learn_more">learn more...</a>)

        </div>
    
            <div class="formControls submitbuttons" i18n:domain="slc.alertservice">
                <input class="context"
                       type="submit"
                       value="Create alert"
                       name="form.button.Save"
                       i18n:attributes="value"
                       />
            </div>
    
            <input type="hidden" name="form.submitted" value="1" />

       </div>

      </div>

  </form>

 </div>



</body>

</html>
